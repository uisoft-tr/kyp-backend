import{r as x,I as R,h as T,aD as F,aF as k,aB as e,b2 as v,b9 as L,bc as I,b3 as D,ba as N,bh as E,b0 as M,bb as B,aI as O}from"./index-CuRaiCHi.js";import{c as H,F as _,R as A,T as V,b as q,C as G,K as J}from"./App-DuAM1Q1r.js";import{ap as K,B as m,H as w,ao as Q,aj as j,ak as W,al as C,am as X}from"./AuthGate-yUozBba6.js";import{R as Y,e as Z}from"./exportExcel-CmOwFxXg.js";var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"},ee=function(t,r){return x.createElement(R,T({},t,{ref:r,icon:U}))},ae=x.forwardRef(ee);const se=({setDrawerOpen:o,setIsEdit:t,collapsed:r})=>{const{datas:{results:a,count:p},page:u,pageSize:i,filters:l}=F(s=>s.data),d=k(),c=K(),f=()=>{Z({endpoint:"/kanunlar/export-excel",filters:l,filename:"kanunlar.xlsx"})},g=(s,n)=>{d(v(s)),d(L(n))},b=s=>{const n=a.find(h=>h.id===s);d(I(n)),t(!0),o(!0)},y=s=>{s?window.open(s,"_blank"):Q({description:"PDF bulunamadı"})},{deletingId:S,handleDelete:$}=H("/kanunlar",null,s=>{const n=a==null?void 0:a.find(h=>h.id===s);return n?`"${n.no}" Nolu kanunu silmek istediğinize emin misiniz?`:"Bu öğeyi silmek istediğinize emin misiniz?"},()=>{d(D({page:1,pageSize:i,filters:l}))}),P=[{title:"Kanun No",dataIndex:"no",key:"no",width:160,render:s=>e.jsx("span",{children:s})},{title:"Kanun Adı",dataIndex:"adi",key:"adi",width:1300,render:s=>e.jsx("span",{children:s})},{title:"",key:"actions",fixed:"right",render:(s,n)=>e.jsxs("div",{className:`flex justify-center !p-0 ${c?"":"gap-2"}`,children:[e.jsx(w,{title:"PDF Görüntüle",children:e.jsx(m,{onClick:()=>{var h,z;return y((z=(h=n.dosyalar)==null?void 0:h[0])==null?void 0:z.dosya)},danger:!0,type:"text",className:"text-blue-600 hover:text-blue-800",icon:e.jsx(ae,{})})},`pdf-${n.id}`),e.jsx(w,{title:"Düzenle",children:e.jsx(m,{className:`${c?"text-[14px]":"text-[18px]"}`,type:"text",icon:e.jsx(Y,{}),onClick:()=>b(n.id)})},`edit-${n.id}`),e.jsx(w,{title:"Sil",children:e.jsx(m,{danger:!0,className:`${c?"text-[14px]":"text-[18px]"}`,type:"text",icon:e.jsx(A,{}),loading:S===n.id,onClick:()=>$(n.id)})},`delete-${n.id}`)]})}];return e.jsx(e.Fragment,{children:e.jsx(_,{dataSource:a,columns:P,rowKey:"id",pagination:{responsive:!0,current:u,pageSize:i,total:p,showLessItems:!1,onChange:g,showTotal:s=>c?"":e.jsxs("div",{children:["Toplam ",e.jsx("span",{className:"font-bold",children:s})," kanundan"," ",e.jsx("span",{className:"font-bold",children:a==null?void 0:a.length})," ","gösteriliyor."]})},scroll:r?{y:400,x:"max-content"}:{x:"max-content",y:"max-content"},footer:()=>(a==null?void 0:a.length)>0?e.jsx(m,{type:"primary",onClick:f,style:{position:"absolute",bottom:0,left:0,zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",borderRadius:6},className:` ${c?"text-[10px]":"text-[14px]"}`,children:"Excel'e Aktar"}):null})})},te=({onFilterChange:o})=>{const[t]=j.useForm(),r=a=>{o(a)};return e.jsxs(j,{form:t,layout:"vertical",onFinish:r,className:"w-full mx-auto px-5",children:[e.jsxs(W,{gutter:[16,16],children:[e.jsx(C,{xs:24,sm:24,md:12,children:e.jsx(j.Item,{label:"Kanun No",name:"no",children:e.jsx(V,{style:{width:"100%"}})})}),e.jsx(C,{xs:24,sm:24,md:12,children:e.jsx(j.Item,{label:"Kanun Adı",name:"ad",children:e.jsx(X,{style:{width:"100%"}})})})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(q,{children:[e.jsx(m,{type:"primary",htmlType:"submit",children:"Filtrele"}),e.jsx(m,{onClick:()=>{t.resetFields(),o({})},children:"Temizle"})]})})]})},ne=({onCollapseChange:o})=>{const t=k(),{page:r,pageSize:a,filters:p}=F(i=>i.data),u=async i=>{try{t(N(!0)),t(E(i)),t(v(1));const l=await M.filter({entity:"/kanunlar",values:{...i,page:1,page_size:a}});t(B(l))}catch(l){console.error("Filtreleme işlemi sırasında bir hata oluştu:",l)}finally{t(N(!1))}};return e.jsx(G,{onChange:i=>o(i.length>0),items:[{key:"1",label:e.jsx("span",{className:"text-white font-bold",children:"Filtrele"}),children:e.jsx(te,{onFilterChange:u})}],className:"bg-[#0F6769]"})},ce=()=>{const[o,t]=x.useState(!1),[r,a]=x.useState(!1),[p,u]=x.useState(!1),i=K(),l=k(),{page:d,pageSize:c,filters:f,loading:g}=F(y=>y.data),b=()=>{a(!1),l(I(null)),u(!1)};return x.useEffect(()=>{l(D({page:d,pageSize:c,filters:f}))},[l,d,c,f]),x.useEffect(()=>()=>{l(E({})),l(v(1))},[l]),e.jsxs("div",{className:`flex flex-col  px-1 gap-2 w-full h-full ${i?"mt-5":""}`,children:[e.jsx(ne,{onCollapseChange:t}),e.jsx("div",{className:"flex-1 overflow-hidden",children:g?e.jsx(O,{}):e.jsx("div",{className:o?"overflow-auto w-full":"w-full",children:e.jsx(se,{setIsEdit:u,setDrawerOpen:a,collapsed:o})})}),e.jsx(J,{open:r,onClose:b,isEdit:p})]})};export{ce as default};
