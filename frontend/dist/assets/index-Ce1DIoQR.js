import{A as xe,G as pe,B as ge,J,af as he,r as i,x as K,t as _,P as Q,bg as fe,b0 as z,aB as t,aF as F,aD as P,ba as q,bh as U,b2 as M,bb as be,b9 as Ce,bc as Z,b1 as ee,aI as ye}from"./index-CuRaiCHi.js";import{av as je,o as ve,aw as Se,ax as $e,W as Ie,aj as C,ak as X,al as y,am as N,B as w,ap as te,H as Y}from"./AuthGate-yUozBba6.js";import{u as ke,p as G,S,b as we,C as Ne,c as Oe,F as Te,R as Ee,d as _e}from"./App-DuAM1Q1r.js";import{R as ze,e as Fe}from"./exportExcel-CmOwFxXg.js";const Pe=e=>{const{paddingXXS:s,lineWidth:n,tagPaddingHorizontal:a,componentCls:l,calc:c}=e,r=c(a).sub(n).equal(),o=c(s).sub(n).equal();return{[l]:Object.assign(Object.assign({},he(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:r,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${J(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${l}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${l}-close-icon`]:{marginInlineStart:o,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${l}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${l}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:r}}),[`${l}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},B=e=>{const{lineWidth:s,fontSizeIcon:n,calc:a}=e,l=e.fontSizeSM;return ge(e,{tagFontSize:l,tagLineHeight:J(a(e.lineHeightSM).mul(l).equal()),tagIconSize:a(n).sub(a(s).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},D=e=>({defaultBg:new pe(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),ae=xe("Tag",e=>{const s=B(e);return Pe(s)},D);var Me=function(e,s){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)s.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]]);return n};const Be=i.forwardRef((e,s)=>{const{prefixCls:n,style:a,className:l,checked:c,onChange:r,onClick:o}=e,m=Me(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:x,tag:p}=i.useContext(K),b=d=>{r==null||r(!c),o==null||o(d)},g=x("tag",n),[j,I,h]=ae(g),u=_(g,`${g}-checkable`,{[`${g}-checkable-checked`]:c},p==null?void 0:p.className,l,I,h);return j(i.createElement("span",Object.assign({},m,{ref:s,style:Object.assign(Object.assign({},a),p==null?void 0:p.style),className:u,onClick:b})))}),De=e=>je(e,(s,n)=>{let{textColor:a,lightBorderColor:l,lightColor:c,darkColor:r}=n;return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:a,background:c,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:r,borderColor:r},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),We=Q(["Tag","preset"],e=>{const s=B(e);return De(s)},D);function Le(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const O=(e,s,n)=>{const a=Le(n);return{[`${e.componentCls}${e.componentCls}-${s}`]:{color:e[`color${n}`],background:e[`color${a}Bg`],borderColor:e[`color${a}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},Re=Q(["Tag","status"],e=>{const s=B(e);return[O(s,"success","Success"),O(s,"processing","Info"),O(s,"error","Error"),O(s,"warning","Warning")]},D);var He=function(e,s){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)s.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]]);return n};const Ae=i.forwardRef((e,s)=>{const{prefixCls:n,className:a,rootClassName:l,style:c,children:r,icon:o,color:m,onClose:x,bordered:p=!0,visible:b}=e,g=He(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:j,direction:I,tag:h}=i.useContext(K),[u,d]=i.useState(!0),k=ve(g,["closeIcon","closable"]);i.useEffect(()=>{b!==void 0&&d(b)},[b]);const W=Se(m),L=$e(m),T=W||L,le=Object.assign(Object.assign({backgroundColor:m&&!T?m:void 0},h==null?void 0:h.style),c),f=j("tag",n),[oe,ne,re]=ae(f),ie=_(f,h==null?void 0:h.className,{[`${f}-${m}`]:T,[`${f}-has-color`]:m&&!T,[`${f}-hidden`]:!u,[`${f}-rtl`]:I==="rtl",[`${f}-borderless`]:!p},a,l,ne,re),R=$=>{$.stopPropagation(),x==null||x($),!$.defaultPrevented&&d(!1)},[,ce]=ke(G(e),G(h),{closable:!1,closeIconRender:$=>{const me=i.createElement("span",{className:`${f}-close-icon`,onClick:R},$);return fe($,me,v=>({onClick:V=>{var E;(E=v==null?void 0:v.onClick)===null||E===void 0||E.call(v,V),R(V)},className:_(v==null?void 0:v.className,`${f}-close-icon`)}))}}),de=typeof g.onClick=="function"||r&&r.type==="a",H=o||null,ue=H?i.createElement(i.Fragment,null,H,r&&i.createElement("span",null,r)):r,A=i.createElement("span",Object.assign({},k,{ref:s,className:ie,style:le}),ue,ce,W&&i.createElement(We,{key:"preset",prefixCls:f}),L&&i.createElement(Re,{key:"status",prefixCls:f}));return oe(de?i.createElement(Ie,{component:"Tag"},A):A)}),se=Ae;se.CheckableTag=Be;const Ve=({onFilterChange:e})=>{const[s]=C.useForm(),[n,a]=i.useState([]),[l,c]=i.useState([]);i.useEffect(()=>{z.get({entity:"/markalar"}).then(o=>{a(o)}),z.get({entity:"/modeller"}).then(o=>{c(o)})},[]);const r=o=>{e(o)};return t.jsxs(C,{form:s,layout:"vertical",onFinish:r,className:"w-full mx-auto px-5",children:[t.jsxs(X,{gutter:32,children:[t.jsx(y,{xs:24,sm:12,md:6,children:t.jsx(C.Item,{label:"DSİ No",name:"no",children:t.jsx(N,{})})}),t.jsx(y,{xs:24,sm:12,md:6,children:t.jsx(C.Item,{label:"Marka",name:"marka",children:t.jsx(S,{allowClear:!0,children:n==null?void 0:n.map(o=>t.jsx(S.Option,{value:o.ad,children:o.ad},o.id))})})}),t.jsx(y,{xs:24,sm:12,md:6,children:t.jsx(C.Item,{label:"Model Adı",name:"model_adi",children:t.jsx(S,{allowClear:!0,children:l==null?void 0:l.map(o=>t.jsx(S.Option,{value:o.ad,children:o.ad},o.id))})})}),t.jsx(y,{xs:24,sm:12,md:6,children:t.jsx(C.Item,{label:"Tür",name:"tur",children:t.jsx(N,{})})})]}),t.jsxs(X,{gutter:32,children:[t.jsx(y,{xs:24,sm:12,md:6,children:t.jsx(C.Item,{label:"Cins",name:"cins",children:t.jsx(N,{})})}),t.jsx(y,{xs:24,sm:12,md:6,children:t.jsx(C.Item,{label:"Yer Adı",name:"ait_oldugu_yer",children:t.jsx(N,{})})}),t.jsx(y,{xs:24,sm:12,md:6,children:t.jsx(C.Item,{label:"Çalışma Durumu",name:"calisma_durumu",children:t.jsxs(S,{allowClear:!0,children:[t.jsx(S.Option,{value:"devam",children:"Devam ediyor"}),t.jsx(S.Option,{value:"bitti",children:"Çalışmıyor"})]})})}),t.jsx(y,{xs:24,sm:12,md:6})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs(we,{children:[t.jsx(w,{type:"primary",htmlType:"submit",children:"Filtrele"}),t.jsx(w,{onClick:()=>{s.resetFields(),e({})},children:"Temizle"})]})})]})},qe=({onCollapseChange:e})=>{const s=F(),{page:n,pageSize:a,filters:l}=P(r=>r.data),c=async r=>{try{s(q(!0)),s(U(r)),s(M(1));const o=await z.filter({entity:"/makine",values:{...r,page:n,page_size:a}});s(be(o))}catch(o){console.error("Filtreleme işlemi sırasında bir hata oluştu:",o)}finally{s(q(!1))}};return t.jsx(Ne,{onChange:r=>e(r.length>0),items:[{key:"1",label:t.jsx("span",{className:"text-white font-bold",children:"Filtrele"}),children:t.jsx(Ve,{onFilterChange:c})}],className:"bg-[#0F6769]"})},Xe=({setDrawerOpen:e,setIsEdit:s,collapsed:n})=>{const{datas:{results:a,count:l},page:c,pageSize:r,filters:o}=P(u=>u.data),m=F(),x=te(),p=()=>{Fe({endpoint:"/makine/export-excel",filters:o,filename:"Makineler.xlsx"})},b=(u,d)=>{m(M(u)),m(Ce(d))},g=u=>{const d=a.find(k=>k.id===u);m(Z(d)),s(!0),e(!0)},{deletingId:j,handleDelete:I}=Oe("/makine",null,u=>{const d=a.find(k=>k.id===u);return d?`"${d.no}" numaralı makineyi silmek istediğinize emin misiniz?`:"Bu öğeyi silmek istediğinize emin misiniz?"},()=>{m(ee({page:1,pageSize:r,filters:o}))}),h=[{title:t.jsx("span",{style:{fontWeight:"bold"},children:"DSİ No"}),dataIndex:"no",key:"no",render:u=>t.jsxs("div",{children:[u," ",t.jsx("i",{className:"anticon anticon-arrow-down"})," "]})},{title:t.jsx("span",{style:{fontWeight:"bold"},children:"Model"}),dataIndex:"model_adi_ad",key:"model_adi_ad"},{title:t.jsx("span",{style:{fontWeight:"bold"},children:"Marka"}),dataIndex:"marka_ad",key:"marka_ad"},{title:t.jsx("span",{style:{fontWeight:"bold"},children:"Tür"}),dataIndex:"tur",key:"tur"},{title:t.jsx("span",{style:{fontWeight:"bold"},children:"Cins"}),dataIndex:"cins",key:"cins"},{title:t.jsx("span",{style:{fontWeight:"bold"},children:"Yer Adı"}),dataIndex:"ait_oldugu_yer",key:"ait_oldugu_yer"},{title:t.jsx("span",{style:{fontWeight:"bold"},children:"Çalışma Durumu"}),dataIndex:"calisma_durumu",key:"calisma_durumu",render:(u,d)=>t.jsx(se,{color:d.calisma_durumu==="devam"?"green":"red",className:"w-[100px] text-center",children:d.calisma_durumu==="devam"?"Devam Ediyor":"Çalışmıyor"})},{title:"",key:"actions",fixed:"right",render:(u,d)=>t.jsxs("div",{className:`flex justify-center !p-0 ${x?"":"gap-2"}`,children:[t.jsx(Y,{title:"Düzenle",children:t.jsx(w,{className:`${x?"text-[14px]":"text-[18px]"}`,type:"text",icon:t.jsx(ze,{}),onClick:()=>g(d.id)})}),t.jsx(Y,{title:"Sil",children:t.jsx(w,{danger:!0,className:`${x?"text-[14px]":"text-[18px]"}`,type:"text",icon:t.jsx(Ee,{}),loading:j===d.id,onClick:()=>I(d.id)})})]})}];return t.jsx(t.Fragment,{children:t.jsx(Te,{dataSource:a,columns:h,rowKey:"id",pagination:{responsive:!0,current:c,pageSize:r,total:l,showLessItems:!1,onChange:b,showTotal:u=>x?"":t.jsxs("div",{children:["Toplam ",t.jsx("span",{className:"font-bold",children:u})," makineden"," ",t.jsx("span",{className:"font-bold",children:a.length})," ","gösteriliyor."]})},scroll:n?{y:400,x:"max-content"}:{x:"max-content",y:"max-content"},footer:()=>(a==null?void 0:a.length)>0?t.jsx(w,{type:"primary",onClick:p,style:{position:"absolute",bottom:0,left:0,zIndex:1e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)",borderRadius:6},className:` ${x?"text-[10px]":"text-[14px]"}`,children:"Excel'e Aktar"}):null})})},Qe=()=>{const[e,s]=i.useState(!1),[n,a]=i.useState(!1),[l,c]=i.useState(!1),r=te(),o=F(),{page:m,pageSize:x,filters:p,loading:b}=P(j=>j.data),g=()=>{a(!1),o(Z(null)),c(!1)};return i.useEffect(()=>{o(ee({page:m,pageSize:x,filters:p}))},[o,m,x,p]),i.useEffect(()=>()=>{o(U({})),o(M(1))},[o]),t.jsxs("div",{className:`flex flex-col  px-1 gap-2 w-full h-full ${r?"mt-5":""}`,children:[t.jsx(qe,{onCollapseChange:s}),t.jsx("div",{className:"flex-1 overflow-hidden",children:b?t.jsx(ye,{}):t.jsx("div",{className:e?"overflow-auto w-full":"w-full",children:t.jsx(Xe,{setIsEdit:c,setDrawerOpen:a,collapsed:e})})}),t.jsx(_e,{open:n,onClose:g,isEdit:l})]})};export{Qe as default};
